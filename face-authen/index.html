<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="description" content="Vanilla JS demo" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css"  />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <h2>Face Authen</h2>
    <div id="container"></div>

    <div style="margin-bottom: 10px">
      <label>
        Keys:
        <select id="select-api-key" onchange="onSelectKey()">
          <option value="0" selected>Web face tracking (..a31)</option>
          <option value="1">QA (..217)</option>
          <option value="2">Labeller test real data (..3b2)</option>
          <option value="3">Labeller test fake data (..ac4)</option>
        </select>
      </label>
    </div>
    <div style="margin-bottom: 10px">
      <label>
        Access key
        <input id="access-key" style="width: 500px" />
      </label>
    </div>
    <div style="margin-bottom: 10px">
      <label>
        Secret key
        <input id="secret-key" style="width: 500px" />
      </label>
    </div>
    <div style="margin-bottom: 10px">
      <label>
        API URL
        <input id="api-url" style="width: 500px" />
      </label>
    </div>
    <!-- <div>
      Api check
      <select id="select-api-check">
        <option value="false">false</option>
        <option value="true" selected>true</option>
      </select>
    </div> -->

    <hr />

    <div>
      Camera:
      <select id="select-camera">
        <option value="true">Front</option>
        <option value="false">Back</option>
      </select>
    </div>
    <button onclick="startFaceAuthen()" id="btn-start-biz-ocr">
      Start
    </button>

    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="https://unpkg.com/@tsocial/trustvision-sdk@2.10.1/dist/trustvision-sdk.umd.js"></script>
    <!-- <script src="/web-sdk/build/tvweb-sdk.standalone.min.js"></script> -->
    <script src="./tvweb-sdk.standalone.min.js"></script>
    <script>
      const inputAccessKey = document.getElementById("access-key");
      const inputSecretKey = document.getElementById("secret-key");
      const inputApiUrl = document.getElementById("api-url");
      const keys = [
        {
          accessKey: "f051dfd3-8a6e-4a15-a4e8-7ea8cdc84a31",
          secretKey: "vgiKCenoKvhPq79KABbFmxCBu6WX1tdw",
        },
        {
          accessKey: "b96f7a1a-a7f1-46e8-9d7f-5f43d2d51217",
          secretKey: "SYsUyQ792pLm7rnDRQFfIL6cgAecZCOp",
        },
        {
          accessKey: "db3d055f-ba7b-4177-b7e8-110068bda3b2",
          secretKey: "R1zjKNbTH3RkT2xgO2CarxAsFbcLCdsf",
        },
        {
          accessKey: "4e24c8f3-7fe0-4824-9339-9a1216a72ac4",
          secretKey: "CkoyKslrfBGv4m53LIlH0Q8yJYf4O56e",
        },
      ];
      function onSelectKey() {
        const selectedKey = document.getElementById("select-api-key").value;
        const { accessKey, secretKey } = keys[selectedKey];
        inputAccessKey.value = accessKey;
        inputSecretKey.value = secretKey;
      }
      inputAccessKey.value = "f051dfd3-8a6e-4a15-a4e8-7ea8cdc84a31";
      inputSecretKey.value = "vgiKCenoKvhPq79KABbFmxCBu6WX1tdw";
      inputApiUrl.value = "https://tv-testing.trustingsocial.com/api";

      const tv = new TVWebSDK.SDK({
        container: document.getElementById("container"),
        lang: "vi",
        assetRoot: "/web-sdk/assets",
        // assetRoot: "/assets",
        enableAntiDebug: false,
      });
      window.tv = tv;
      function startFaceAuthen() {
        const cameraSelected = document.getElementById("select-camera");
        tv.faceAuthen({
          onDone: () => {
            tv.destroyView();
          },
          apiCredentials: {
            accessKey: inputAccessKey.value,
            secretKey: inputSecretKey.value,
            apiUrl: inputApiUrl.value,
          },
          frontCamera: cameraSelected.value === "true",
        });
      }
    </script>
  </body>
</html>
